(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{640:function(t,a,s){"use strict";s.r(a);var r=s(25),n=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"bit-编译原理实验五-第-3-章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bit-编译原理实验五-第-3-章"}},[t._v("#")]),t._v(" BIT 编译原理实验五（第 3 章）")]),t._v(" "),s("p",[t._v("下面的例子将识别 {1, 2, 3} 或是 {1, {2, 3}, 4} 此类包裹在花括号或者嵌套在花括号的一些整数。")]),t._v(" "),s("p",[t._v('并把这些整数翻译为："\\u0063\\u0003\\u01c3" 类似的字符串。')]),t._v(" "),s("h2",{attrs:{id:"入门-antlr4-语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入门-antlr4-语法"}},[t._v("#")]),t._v(" 入门 Antlr4 语法")]),t._v(" "),s("p",[s("strong",[t._v("1. 创建语法文件 ArrayInit.g4")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 语法文件通常以 grammar 开头\n *  这是一个名为 ArrayInit 的语法，它必须与文件名 ArrayInit.g4 相匹配\n */")]),t._v("\ngrammar "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayInit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 一条名为 init 的规则，它匹配一对花括号中的、逗号分隔的 value */")]),t._v("\ninit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{'")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'}'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须匹配至少一个 value")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 一个 value 可以是嵌套的花括号结构，也可以是一个简单的整数，即 INT 词法符号 */")]),t._v("\nvalue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" init\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" INT\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 语法分析器的规则必须以小写字母开头，词法分析器的规则必须以大写字母开头")]),t._v("\nINT "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义词法符号 INT，它由一个或多个数字组成")]),t._v("\nWS\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" \\t\\r\\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" skip "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义词法规则 “空白符好”，丢弃之")]),t._v("\n")])])]),s("p",[s("strong",[t._v("2. 生成 java 文件")])]),t._v(" "),s("p",[t._v("输入命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("antlr4 ArrayInit.g4\n")])])]),s("p",[t._v("生成文件简单解释：")]),t._v(" "),s("ul",[s("li",[t._v("ArrayInitParser.java —— 语法分析器类")]),t._v(" "),s("li",[t._v("ArrayInitLexer.java —— 词法分析器类")]),t._v(" "),s("li",[t._v("ArrayInit.tokens —— 为我们定义的词法符号指定一个数字形式的类型")]),t._v(" "),s("li",[t._v("ArrayInitListener.java, ArrayInitBaseListener.java —— Antlr 遍历语法树时会有一系列事件，通过这两个文件可以定义事件发生时的功能")])]),t._v(" "),s("p",[s("strong",[t._v("3. 编译 java 文件")])]),t._v(" "),s("p",[t._v("输入命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("javac *.java\n")])])]),s("p",[s("strong",[t._v("4. grun 启动 TestRig")])]),t._v(" "),s("p",[t._v("输入命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("grun ArrayInit init -tokens\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{99, 3, 451}\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("^Z\n")])])]),s("p",[t._v("效果如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/Li-Jun-Lin/figure/raw/master/homework/compiler_principles/lab5//007.jpg",alt:""}})]),t._v(" "),s("p",[t._v("以 "),s("code",[t._v("[@5,8,:10='451',<INT>,1:8]")]),t._v("为例：")]),t._v(" "),s("ul",[s("li",[t._v("5 代表它是第 5 个词法符号（从 0 开始计数）")]),t._v(" "),s("li",[t._v("由第 8 个到第 10 个字符组成（从 0 开始计数，包括第 8 个和第 10 个）")]),t._v(" "),s("li",[t._v("包含文本是 451")]),t._v(" "),s("li",[t._v("类型是 INT")]),t._v(" "),s("li",[t._v("位于输入文本的第 1 行（从 1 开始计数）第 8 个字符（从 0 开始计数，tab 作为一个字符）")])]),t._v(" "),s("p",[s("strong",[t._v("5. 查看 LISP 风格的语法树")])]),t._v(" "),s("p",[t._v("输入命令：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("grun ArrayInit init -tree\n")])])]),s("p",[s("strong",[t._v("6. 查看可视化语法树")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("grun ArrayInit init -gui\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);